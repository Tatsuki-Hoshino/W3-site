function setSessionStorageFlag(e,i){sessionStorage.setItem(e,i)}function getSessionStorageFlag(e){return null!==sessionStorage.getItem(e)}let blockStates=new Map;function handleVisibility(e,i,t,s,a){let l;"display-hide-after-time"===(l=e.classList.contains("vk_fixed-display-mode-display-hide-after-time")?"display-hide-after-time":e.classList.contains("vk_fixed-display-mode-show-on-scroll")?"show-on-scroll":"always-visible")&&null!==i&&0<=i&&setTimeout(()=>{e.classList.contains("is-timed-visible")||(e.classList.add("is-timed-visible"),a&&setSessionStorageFlag("displayed_"+s,"true")),0<t&&setTimeout(()=>{e.classList.contains("is-timed-visible")&&(e.classList.remove("is-timed-visible"),e.classList.add("is-timed-hide"))},1e3*t)},1e3*i),"display-hide-after-time"===l&&(null===i||i<0)&&0<t&&setTimeout(()=>{e.classList.add("is-timed-hide")},1e3*t)}function initializeDisplayHide(){document.querySelectorAll(".vk_fixed-display-mode-display-hide-after-time, .vk_fixed-display-mode-show-on-scroll, .vk_fixed-display-mode-always-visible").forEach(e=>{var i=e.getAttribute("data-display-after-seconds"),t=parseFloat(e.getAttribute("data-hide-after-seconds"))||0,i=i?parseFloat(i):null,s=e.getAttribute("data-block-id"),a="true"===e.getAttribute("data-dont-show-again");a&&getSessionStorageFlag("displayed_"+s)||"show-on-scroll"!==e.getAttribute("data-mode")&&handleVisibility(e,i,t,s,a)})}function convertUnitToPixels(e,i){switch(i){case"px":return e;case"em":case"rem":return e*parseFloat(getComputedStyle(document.documentElement).fontSize);case"%":case"vh":case"svh":return e*window.innerHeight/100;default:return e}}window.addEventListener("scroll",function(){document.querySelectorAll(".vk_fixed-display-mode-show-on-scroll").forEach(e=>{let i=e.getAttribute("data-block-id");var t=parseInt(e.getAttribute("data-scroll-timing"),10),s=e.getAttribute("data-scroll-timing-unit"),a="true"===e.getAttribute("data-persist-visible"),t=convertUnitToPixels(t,s),s=e.getAttribute("data-hide-after-seconds"),s=parseFloat(s)||0,l=(blockStates.has(i)||blockStates.set(i,{wasHidden:!1}),blockStates.get(i));window.scrollY>t&&!l.wasHidden?e.classList.contains("is-visible")||(e.classList.add("is-visible"),0<s&&!a&&setTimeout(()=>{e.classList.contains("is-visible")&&(e.classList.remove("is-visible"),blockStates.set(i,{wasHidden:!0}))},1e3*s)):!a&&l.wasHidden||a||e.classList.contains("is-visible")&&e.classList.remove("is-visible")})}),window.initializeDisplayHide=initializeDisplayHide,window.addEventListener("DOMContentLoaded",initializeDisplayHide),window.addEventListener("load",initializeDisplayHide);