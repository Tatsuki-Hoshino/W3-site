(()=>{"use strict";let e=!1;let t=0;(async()=>{document.body.addEventListener("change",(async function(a){if(a.target.matches(".vkfs__input-wrap--child-dropdown")){for(-1!==a.target.name.indexOf("category_name_ancestor")?a.target.name=a.target.name.replace("category_name_ancestor","category"):-1!==a.target.name.indexOf("tag_ancestor")?a.target.name=a.target.name.replace("tag_ancestor","post_tag"):-1!==a.target.name.indexOf("_ancestor")&&(a.target.name=a.target.name.replace("_ancestor[]","[]"));a.target.nextElementSibling;)a.target.nextElementSibling.remove();const n=a.target.name,r=a.target.value,o=a.target.querySelector("option").innerText,c=a.target.className.replace(` vkfs__depth-${t}`,` vkfs__depth-${t+1}`),g=a.target.parentNode,s=g.getAttribute("data-vkfs-dropdown-options"),i=await(async(t,a,n,r,o)=>{if(e)return;e=!0;const c=ajax_object.ajax_url,g=ajax_object.nonce;try{const e=await fetch(c,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`action=get_child_categories&parent_name=${t}&parent_value=${a}&parent_class=${r}&option_first=${n}&container_settings=${o}&nonce=${g}`}),s=await e.json();if(s.success)return s.data}catch(e){throw e}finally{e=!1}})(n,r,o,c,s);i&&(g.insertAdjacentHTML("beforeend",i),t++,-1!==a.target.name.indexOf("category")?a.target.name=a.target.name.replace("category","category_name_ancestor"):-1!==a.target.name.indexOf("post_tag")?a.target.name=a.target.name.replace("post_tag","tag_ancestor"):a.target.name=a.target.name.replace("[]","_ancestor[]"))}}))})()})();