(()=>{"use strict";const e=window.location.search.slice(1);let t=!1;const n=async(e,n,l,o,r)=>{if(t)return;t=!0;const i=ajax_object.ajax_url,s=ajax_object.nonce;try{const t=await fetch(i,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`action=get_child_categories&parent_name=${e}&parent_value=${n}&parent_class=${o}&option_first=${l}&container_settings=${r}&nonce=${s}`}),c=await t.json();if(c.success)return c.data}catch(e){throw e}finally{t=!1}},l=document.getElementsByClassName("vk-filter-search"),o=(()=>{const t={};return e?(e.split("&").forEach((function(e){const n=e.split("=");n[0]=n[0].replace("%5B%5D",""),t[n[0]]+=","+n[1],t[n[0]]=t[n[0]].replace("undefined",""),t[n[0]]=t[n[0]].replace(",,",","),t[n[0]].startsWith(",")&&(t[n[0]]=t[n[0]].slice(1)),t[n[0]].endsWith(",")&&(t[n[0]]=t[n[0]].slice(0,-1)),void 0!==t[n[0]]&&"undefined"!==t[n[0]]||(t[n[0]]="")})),t):t})(),r=e=>{Object.keys(o).forEach((async t=>{let r;if(r=-1!==o[t].indexOf(",")?o[t].split(","):-1!==o[t].indexOf("+")?o[t].split("+"):[o[t]],"s"===t){const n=l[e].querySelector('.vkfs__keyword input[name="s"]');null!==n&&(n.value=decodeURIComponent(o[t]))}else if("post_type"===t){const t=l[e].querySelectorAll(".vkfs__input-wrap--select.vkfs__input-wrap--post_type");if(null!=t)for(let e=0;e<t.length;e++){const n=t[e].querySelectorAll("option");if(null!=n)for(let e=0;e<n.length;e++)Object.keys(r).forEach((t=>{n[e].value===decodeURIComponent(r[t])&&(n[e].selected=!0)}))}const n=l[e].querySelectorAll(".vkfs__input-wrap--checkbox.vkfs__input-wrap--post_type");if(null!=n)for(let e=0;e<n.length;e++){const t=n[e].querySelectorAll("input");if(null!=t)for(let e=0;e<t.length;e++)Object.keys(r).forEach((n=>{t[e].value===decodeURIComponent(r[n])&&(t[e].checked=!0)}))}const o=l[e].querySelectorAll(".vkfs__input-wrap--radio.vkfs__input-wrap--post_type");if(null!=o)for(let e=0;e<o.length;e++){const t=o[e].querySelectorAll("input");if(null!=t)for(let e=0;e<t.length;e++)Object.keys(r).forEach((n=>{t[e].value===decodeURIComponent(r[n])&&(t[e].checked=!0)}))}}else if("vkfs_form_id"!==t&&"vkfs_orderby"!==t)if(t.endsWith("_numeric_equal")||t.endsWith("_numeric_min")||t.endsWith("_numeric_max")||t.endsWith("_date_equal")||t.endsWith("_date_before")||t.endsWith("_date_after")||t.endsWith("_time_equal")||t.endsWith("_time_before")||t.endsWith("_time_after")||t.endsWith("_datetime_equal")||t.endsWith("_datetime_before")||t.endsWith("_datetime_after")||t.endsWith("_operator")||t.endsWith("_ancestor")){if(t.endsWith("_numeric_equal")||t.endsWith("_numeric_min")||t.endsWith("_numeric_max")){const n=l[e].querySelector(`.vkfs__input-numeric.vkfs__input-numeric--${t}`);null!=n&&(n.value=decodeURIComponent(o[t]))}else if(t.endsWith("_date_equal")||t.endsWith("_date_before")||t.endsWith("_date_after")){const n=l[e].querySelector(`.vkfs__input-date.vkfs__input-date--${t}`);null!=n&&(n.value=decodeURIComponent(o[t]))}else if(t.endsWith("_time_equal")||t.endsWith("_time_before")||t.endsWith("_time_after")){const n=l[e].querySelector(`.vkfs__input-time.vkfs__input-time--${t}`);null!=n&&(n.value=decodeURIComponent(o[t]))}else if(t.endsWith("_datetime_equal")||t.endsWith("_datetime_before")||t.endsWith("_datetime_after")){const n=l[e].querySelector(`.vkfs__input-datetime.vkfs__input-datetime--${t}`);null!=n&&(n.value=decodeURIComponent(o[t]).replace("+"," "))}}else{const i=l[e].querySelectorAll(`.vkfs__input-wrap--select.vkfs__input-wrap--${t}`);if(null!=i)for(let e=0;e<i.length;e++)if(i[e].classList.contains("vkfs__input-wrap--child-dropdown")){let l=i[e],r="";r=void 0!==o[t+"_ancestor"]?decodeURIComponent(o[t+"_ancestor"]+","+o[t]):decodeURIComponent(o[t]);const s=",",c=r.split(s),a=l.querySelectorAll("option");a.forEach((e=>{e.value===c[0]&&(e.selected=!0)}));for(let e=0;e<c.length;e++){const t=l.name,o=c[e],r=a[0].innerText,i=l.className.replace(` vkfs__depth-${e}`,` vkfs__depth-${e+1}`),s=l.parentNode,_=s.getAttribute("data-vkfs-dropdown-options"),u=await n(t,o,r,i,_);if(!u)return!1;l.insertAdjacentHTML("afterend",u),-1!==l.name.indexOf("category")?l.name=t.replace("category","category_name_ancestor"):-1!==l.name.indexOf("post_tag")?l.name=t.replace("post_tag","tag_ancestor"):l.name=t.replace("[]","_ancestor[]"),l=s.querySelector(`.vkfs__depth-${e+1}`),l.querySelectorAll("option").forEach((t=>{t.value===c[e+1]&&(t.selected=!0)}))}}else{const t=i[e].querySelectorAll("option");if(null!=t)for(let e=0;e<t.length;e++)Object.keys(r).forEach((n=>{t[e].value===decodeURIComponent(r[n])&&(t[e].selected=!0)}))}const s=l[e].querySelectorAll(`.vkfs__input-wrap--checkbox.vkfs__input-wrap--${t}`);if(null!=s)for(let e=0;e<s.length;e++){const t=s[e].querySelectorAll("input");if(null!==t)for(let e=0;e<t.length;e++)Object.keys(r).forEach((n=>{t[e].value===decodeURIComponent(r[n])&&(t[e].checked=!0)}))}const c=l[e].querySelectorAll(".vkfs__operator-wrap.vkfs__input-wrap--radio");if(null!=c)for(let e=0;e<c.length;e++){const n=c[e].querySelectorAll("input");if(null!==n)for(let e=0;e<n.length;e++){let l="";t.endsWith("_operator")&&(l=t),n[e].name==="vkfs_"+l&&n[e].value===o[l]&&(n[e].checked=!0)}}const a=l[e].querySelectorAll(`.vkfs__input-wrap--radio.vkfs__input-wrap--${t}`);if(null!=a)for(let e=0;e<a.length;e++){const t=a[e].querySelectorAll("input");if(null!==t)for(let e=0;e<t.length;e++)Object.keys(r).forEach((n=>{t[e].value===decodeURIComponent(r[n])&&(t[e].checked=!0)}))}}else if("vkfs_orderby"===t){const t=l[e].querySelector(".vkfs__input-wrap--select.vkfs__input-wrap--orderby");if(null!=t){const e=t.querySelectorAll("option");if(null!=e)for(let t=0;t<e.length;t++)Object.keys(r).forEach((n=>{e[t].value===decodeURIComponent(r[n])&&(e[t].selected=!0)}))}}}))},i=e=>{const t=l[e].querySelectorAll(".vkfs__input-wrap--radio");if(null!=t)for(let e=0;e<t.length;e++){const n=t[e].querySelectorAll("input");if(null!==n)for(let e=0;e<n.length;e++)""!==n[e].value&&"any"!==n[e].value&&"and"!==n[e].value||(n[e].checked=!0)}};document.addEventListener("DOMContentLoaded",(function(){if(-1===e.indexOf("vkfs_submitted=true"))for(let e=0;e<l.length;e++)i(e),r(e)}))})();